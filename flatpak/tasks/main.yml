#SPDX-License-Identifier: MIT-0
---
# tasks file for flatpak
- name: Install Flatpak
  pacman:
    name: flatpak

- name: Flatseal
  flatpak:
    name: com.github.tchx84.Flatseal

- name: Copy Cron Script
  register: script
  copy:
    src: "{{ role_path }}/files/update_flatpak.sh"
    dest: "/home/{{ username }}/.local/cron/update_flatpak.sh"
    owner: "{{ username }}"
    mode: '0755'

- name: Flatpak Cron Job
  cron:
    name: Update Flatpaks
    special_time: weekly
    user: l
    job: "/home/{{ username }}/.local/cron/update_flatpak.sh"

# TODO XDG Desktop Portal Config
