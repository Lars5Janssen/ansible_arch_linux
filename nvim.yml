---
# Configure Nvim
- name: Dotfiles 
  import_tasks: dotfiles.yml
- name: AUR
  import_tasks: 
    file: aur.yml

- name: Install nvim and direct dependencies
  become: true
  pacman: # These package names are arch specific no guarantee for other distros
    name:
      - neovim
      - lua
      - luarocks

- name: Install language servers
  become: true
  pacman:
    name:
      - bash-language-server
      - jedi-language-server
      - lua-language-server
      - vscode-json-languageserver
      - yaml-language-server
      - tree-sitter
      # might add tree-siiter
      #                      -bash
      #                      -c
      #                      -lua
      #                      -markdown
      #                      -rust
      #                      -vim
      #                      -vimdoc
      #                      -python

- name: Install AUR Server
  command:
    argv:
      - paru 
      - --noconfirm
      - --needed
      - -S
      - dockerfile-language-server-bin
  register: paru_output
  changed_when: paru_output.stderr.find('up to date -- skipping') == -1
