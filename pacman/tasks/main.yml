#SPDX-License-Identifier: MIT-0
---
# tasks file for pacman
- name: Misc Pacman Config Options
  lineinfile:
    path: /etc/pacman.conf
    state: "{{ item.state }}"
    line: "{{ item.option }}"
  loop:
    - { option: Color, state: present}
    - { option: ILoveCandy, state: present}

- name: 32-Bit (Multilib)
  become: true
  blockinfile:
    path: /etc/pacman.conf
    state: present
    block: |
      [multilib]
      Include = /etc/pacman.d/mirrorlist

- name: download threads
  lineinfile:
    path: /etc/pacman.conf
    state: present
    line: ParallelDownloads = 8

- name: Install Relector
  become: true
  pacman:
    name: reflector
    state: present
  register: reflector

# Make Use of Reflector A Cron Job
- name: Use Reflector
  cron:
    name: "Pacman Reflector"
    day: "*/7"
    job: reflector --country Germany --sort rate --protocol https --save /etc/pacman.d/mirrorlist
